name     = Text-VimColor
author   = Geoff Richards <qef@laxan.com>
author   = Randy Stauner <rwstauner@cpan.org>
license  = Perl_5
; copyright statement gets munged after build (see Run plugin below)
copyright_holder  = Randy Stauner
copyright_year    = 2011

[@Author::RWSTAUNER]
skip_plugins = ::(ModuleBuild|DualBuilders)$

; current default, but very important.  the lib/auto tree only exists to enable `prove -lv`
GatherDir.follow_symlinks = 0

;https://github.com/jquelin/dist-zilla-plugin-prepender/pull/1
;Prepender:skip = t/data/has_tabs.pl

[Prereqs]
; bright colors added in 3.0; if this causes problems: Special => ($Term::ANSIColor::VERSION >= 3 ? 'bright_magenta' : 'magenta'),
Term::ANSIColor = 3

; default GatherDir skips leading-dot dirs but we want to include this specific one
[GatherDir / GatherTestDotVim]
root = t/.vim
prefix = t/.vim

[Run::AfterBuild]
; without vim don't even try to install; send NA test report
run = perl -i -pe '/^(WriteMakefile)/ and print qq/system("vim -e -s --cmd quit") == 0\n  or die "\\nCannot install without \\"vim\\" command\\n\\n";\n\n/' %d/Makefile.PL

; fix generated Copyright statements to include GEOFFR's work
run = perl -i -pe 's/^(#?)(\s*This software is copyright \(c\))( \d+ by Randy Stauner\.)/$1$2 2002-2006 by Geoff Richards.\n$1\n$1$2$3/' %d/lib/Text/VimColor.pm %d/bin/text-vimcolor

[%PodWeaver]
-StopWords.include = ansi html xml DOCTYPE XHTML XSL XSLT XSL-FO pdf inline stylesheet filetype
